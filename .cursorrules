# Cursor Rules for Cleanbox Project

## ðŸŽ¯ **Project Overview**
Cleanbox is an intelligent email management tool that learns from existing organization patterns to automatically clean inboxes. It's a Ruby application with a CLI interface, focusing on pattern-based spam detection and smart email filing.

## ðŸš€ **How We Work Together**

### **Before Writing Code**
1. **Always discuss the approach first** - Don't assume what the user wants
2. **Ask clarifying questions** - Understand the scope and requirements
3. **Check existing code** - Look at how similar functionality is implemented
4. **Consider the user's preferences** - They prefer atomic commits and clean code

### **Code Quality Standards**
- **RuboCop compliant** - Follow Ruby style guidelines consistently
- **Single quotes** for strings (unless interpolation needed)
- **Proper Ruby idioms** - Use `attr_accessor`, `||` operators, etc.
- **Clean, readable code** - Follow existing patterns in the codebase
- **No over-engineering** - Don't add features unless specifically requested

### **Git Workflow**
- **Atomic commits** - Each commit should contain one logical change
- **Conventional commit messages** - Use `feat:`, `fix:`, `style:`, `docs:` prefixes
- **Never use `git add .`** - Be specific about what files to commit
- **Group related changes** - Multiple files for same feature in one commit

### **Architecture Principles**
- **Leverage existing code** - Don't recreate what already exists
- **Follow established patterns** - Look at how similar features are implemented
- **Minimal changes** - Make the smallest change that accomplishes the goal
- **Check dependencies** - Ensure proper require statements and file paths

### **Communication Style**
- **Ask before implementing** - Discuss approach, don't just write code
- **Explain your reasoning** - Help the user understand your decisions
- **Admit mistakes** - If you make an error, acknowledge and fix it
- **Learn from feedback** - Pay attention to user preferences and adjust
- **Use factual, objective language** - Focus on what changed and why, not subjective judgements
- **Avoid value judgements** - Don't use phrases like "better", "improved", "transforms", "well-organized", etc.
- **No unnecessary commentary** - Don't add lines like "All tests passing" or subjective assessments
- **Stick to facts** - Describe the changes made, files affected, and technical reasons
- **Avoid AI-generated language patterns** - Don't use phrases like "X files modified", "Y additions, Z deletions", or other statistical summaries that sound robotic

### **Common Pitfalls to Avoid**
- **Over-engineering** - Don't add features beyond what's requested
- **Ignoring existing patterns** - Check how similar functionality works
- **Poor error handling** - Let existing error handling do its job
- **Inconsistent style** - Follow RuboCop and project conventions
- **Wrong file paths** - Use correct relative paths from script locations

### **When in Doubt**
1. **Ask questions** - Clarify requirements and approach
2. **Show examples** - Demonstrate what you're thinking before implementing
3. **Start small** - Begin with minimal implementation and iterate
4. **Check existing code** - Look for patterns and examples in the codebase

## ðŸ“š **Key Files to Reference**
- `cleanbox` - Main script showing require structure and entry point
- `lib/cleanbox.rb` - Core Cleanbox class with main functionality
- `lib/configuration.rb` - Configuration management
- `lib/connection.rb` - Base connection class
- `TODO.md` - Comprehensive project roadmap and priorities

## ðŸ”§ **Development Environment**
- Ruby 2.7+ with Bundler
- Uses `Bundler.require(:default, bundler_env)` for gem loading
- Supports both IRB and Pry for console sessions
- RuboCop for code style enforcement

Remember: **Discuss first, implement second, and always follow the user's preferences for code organization and style.**

